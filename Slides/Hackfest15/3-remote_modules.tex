%----------------------------------------------------------------------------------------
%	PACKAGES & THEMES
%----------------------------------------------------------------------------------------

\documentclass[8pt]{beamer}

\usepackage{etex}
\mode<presentation> {

\usetheme{Vilanova}
}



\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{array}
\usepackage{chronology}
\let\CHRONOLOGY\chronology
\let\endCHRONOLOGY\endchronology
\def\chronology{\shorthandoff{;}\CHRONOLOGY}
\def\endchronology{\endCHRONOLOGY\shorthandon{;}}
\usepackage{pstricks}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{xcolor}
\usepackage{textpos}
\usepackage{tikz}
\usepackage{xmpincl}
\usetikzlibrary{arrows}
\usepackage{pifont}

\usepackage{listings,color}

\definecolor{listcomment}{rgb}{0.0,0.5,0.0}
\definecolor{listkeyword}{rgb}{0.0,0.0,0.5}
\definecolor{listnumbers}{gray}{0.65}
\definecolor{listlightgray}{gray}{0.955}
\definecolor{listwhite}{gray}{1.0}


%% \setbeamertemplate{background canvas}{\includegraphics
%%    [width=\paperwidth,height=\paperheight]{./images/title.pdf}}

\AtBeginSection[]
{
\addtocounter{framenumber}{-1}
\begin{frame}
\frametitle{Sommaire}
\tableofcontents[currentsection]
\end{frame}}

%----------------------------------------------------------------------------------------
%	PAGE TITRE
%----------------------------------------------------------------------------------------
\title{Orfeo ToolBox users meeting and hackfest 2015}
\includexmp{images/cc}
\subtitle{Contributions through remote modules}
\author{OTB development team}% date and event here
\date{3 - 5 june 2015, Toulouse}

\pgfdeclareimage[height=96mm,width=128mm]{background}{images/fondsClairSansLogo}
\pgfdeclareimage[height=0.2cm]{cc}{images/CC-licence.png}
\setbeamertemplate{background}{\pgfuseimage{background}}
\pgfdeclareimage[height=0.6cm]{logoIncrust}{images/logoIncrust}
\logo{
\begin{tabular}{p{0.22\textwidth}p{0.58\textwidth}p{0.1\textwidth}p{0.1\textwidth}}
\href{http://creativecommons.org/licenses/by-sa/3.0/}{\pgfuseimage{cc}}
& \vspace{-0.03\textwidth} \scriptsize{} % date and event here
&  & \href{http://www.orfeo-toolbox.org}{\pgfuseimage{logoIncrust}}\\
\end{tabular}
}

\begin{document}
\begin{frame}
\titlepage
\end{frame}

\begin{frame}
\frametitle{By now, you know that:}
\begin{itemize}
\item Orfeo ToolBox is now organized in groups/modules
\item Each module contains classes, applications, third parties, and their related tests
\item Each module can be deactivated
\item There is a dependency tracking mechanism that deactivate downstream modules
\item CMake automagically recognize any subfolder of Modules/*/ as a module
\item In particular, we have a dedicated Modules/Remote folder to host contributions
\end{itemize}

\textcolor{red}{So, next time you want to contribute a piece of code, why not write a module?}


\end{frame}

\begin{frame}[fragile]
\frametitle{Writing a remote module is simple (1/2)}
Let's write a remote module to share the \textbf{Awesome} algorithm code:
\begin{itemize}
\item A header file: \textit{otbAwesomeFilter.h}
\item A template methods file: \textit{otbAwesomeFilter.txx}
\item A source file: \textit{otbAwesomeFilter.cxx}
\end{itemize}

\begin{block}{otb-module.cmake}
\begin{small}
\begin{verbatim}
otb_module(Awesome 
           DEPENDS OTBImageBase OTBStatistics 
           DESCRIPTION "Implementation of awesome algorithm")
\end{verbatim}
\end{small}
\end{block}

\begin{block}{CMakeLists.txt}
\begin{small}
\begin{verbatim}
project(Awesome)
set(Awesome_LIBRARIES OTBAwesome) # only if your module contain a src folder
otb_module_impl()
\end{verbatim}
\end{small}
\end{block}
\end{frame}

\begin{frame}[fragile]
\frametitle{Writing a remote module is simple (2/2)}
\begin{block}{The include folder}
\begin{itemize}
\item There goes the \textit{otbAwesomeFilter.h} and \textit{otbAwesomeFilter.txx} files
\item A nothing more!
\end{itemize}
\end{block}

\begin{block}{The src folder (not needed if template only code)}
\begin{itemize}
\item There goes the \textit{otbAwesomeFilter.cxx} file
\item And a \textit{CMakeLists.txt} file
\end{itemize}
\end{block}


\begin{block}{CMakeLists.txt in src folder}
\begin{small}
\begin{verbatim}
set(OTBAwesome_SRC otbAwesomeFilter.cxx)

add_library(OTBAwesome ${OTBAwesome_SRC})

target_link_libraries(OTBAwesome ${OTBImageBase_LIBRARIES} ${OTBStatistics_LIBRARIES})

otb_module_target(OTBAwesome)
\end{verbatim}
\end{small}
\end{block}

\textcolor{red}{That'all folks! (extra folders and cmake required for tests and app)}

\end{frame}

\begin{frame}
\frametitle{Great, but how do I build it?}
\begin{block}{Building the new module}
\begin{enumerate}
\item Place your module in Modules/Remote folder
\item Run cmake configuration (ensure the BUILD\_DEFAULT\_MODULES is ON, or your module is enabled)
\item make
\end{enumerate}
\end{block}

\begin{block}{Sharing the new module}

\end{block}

\end{frame}

\end{document}
